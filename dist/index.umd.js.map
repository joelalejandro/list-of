{"version":3,"file":"index.umd.js","sources":["../src/list-of.js"],"sourcesContent":["/**\n * ListOf - A JavaScript implementation of the C# List<T> object\n *\n * Copyright Â© 2016 Joel A. Villarreal Bertoldi. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nconst _asListOf = (type, values) => new ListOf(type).add(values);\n\nexport default class ListOf {\n  constructor(type) {\n    this.type = type;\n\n    this.__array__ = [];\n    this.__typeIsPrimitive__ = [Number, String, Boolean].indexOf(type) > -1;\n    this.__typeIsObject__ = !this.__typeIsPrimitive__\n      && type.toString().toLowerCase().indexOf('function') === 0;\n  }\n\n  add(items) {\n    const _add = (item) => {\n      if ((this.__typeIsPrimitive__ && (typeof item).toLowerCase() === this.type.name.toLowerCase())\n        || (this.__typeIsObject__ && item instanceof this.type)) {\n        this.__array__.push(item);\n      } else {\n        throw new Error(`ListOf#add: Item must be of type ${this.type.name}`);\n      }\n    }\n\n    if (Array.isArray(items)) {\n      for (let i = 0; i < items.length; i += 1) {\n        _add(items[i]);\n      }\n      return this;\n    }\n\n    _add(items);\n    return this;\n  }\n\n  all(what) {\n    if (typeof what === 'object' && !Array.isArray(what)) {\n      return this.__array__.every ? this.__array__.every(\n        item => Object.keys(what).map(key => item[key] === what[key]).reduce((a, b) => a && b)\n      ) : this.find(what).count() === this.__array__.length;\n    } else if (typeof what === 'function') {\n      return this.__array__.every ? this.__array__.every(what) : this.__array__.filter(what).length === this.__array__.length;\n    }\n    throw new Error(`ListOf#all: parameter 'what' must be an Object or a function predicate`)\n  }\n\n  any(what) {\n    if (typeof what === 'object' && !Array.isArray(what)) {\n      return this.__array__.some ? this.__array__.some(\n        item => Object.keys(what).map(key => item[key] === what[key]).reduce((a, b) => a || b)\n      ) : (this.find(what).count() || Infinity) <= this.__array__.length;\n    } else if (typeof what === 'function') {\n      return this.__array__.some ? this.__array__.some(what) : (this.__array__.filter(what).length || Infinity) <= this.__array__.length;\n    }\n    throw new Error(`ListOf#all: parameter 'what' must be an Object or a function predicate`)\n  }\n\n  average(what) {\n    return this.sum(what) / this.__array__.length;\n  }\n\n  sum(what) {\n    let sum = 0;\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        sum += this.__array__[i][what];\n      }\n    } else if (this.__typeIsPrimitive__ && this.type === Number) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        sum += this.__array__[i];\n      }\n    }\n    return sum;\n  }\n\n  clear() {\n    this.__array__ = [];\n    return this;\n  }\n\n  contains(item) {\n    return this.any(item);\n  }\n\n  count(what) {\n    return !what ? this.__array__.length : this.find(what).count();\n  }\n\n  elementAt(index) {\n    return this.__array__[index];\n  }\n\n  except(what) {\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      return _asListOf(this.type, this.__array__.filter((item) => {\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        Object.keys(what).forEach((key) => {\n          if (item[key] && Array.isArray(what[key])) {\n            for (let i = 0; i < what[key].length; i += 1) {\n              if (item[key] !== what[key][i]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else if (item[key]) {\n            isValid &= item[key] === what[key];\n          }\n        });\n      }));\n    } else if (what instanceof Function) {\n      return _asListOf(this.type, this.__array__.filter(what));\n    }\n    return _asListOf(this.type, this.__array__.filter(item => item !== what));\n  }\n\n  exists(what) {\n    return this.any(what);\n  }\n\n  findFirst(what) {\n    const result = this.find(what);\n    return result.length > 0 ? result[0] : null;\n  }\n\n  findLast(what) {\n    const result = this.find(what)\n  }\n\n  first(what) {\n    return !what ? this.__array__[0] : this.findFirst(what);\n  }\n\n  last(what) {\n    return !what ? this.__array__[this.__array__.length - 1] : this.findLast(what);\n  }\n\n  forEach(callback) {\n    for (let i = 0; i < this.__array__.length; i += 1) {\n      callback.call(this, this.__array__[i], i);\n    }\n  }\n\n  indexOf(what) {\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const item = this.__array__[i];\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (item === null && what === null) {\n          return i;\n        } else if (what !== null) {\n          continue;\n        }\n        Object.keys(what).forEach((key) => {\n          if (item[key]) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (item[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else {\n            isValid &= item[key] === what[key];\n          }\n        });\n        if (isValid) {\n          return i;\n        }\n      }\n    }\n    return this.__array__.indexOf(what);\n  }\n\n  indexesOf(what) {\n    const indexes = [];\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const item = this.__array__[i];\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (item === null && what === null) {\n          indexes.push(i);\n          continue;\n        } else if (what !== null) {\n          continue;\n        }\n        Object.keys(what).forEach((key) => {\n          if (item[key]) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (item[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else {\n            isValid &= item[key] === what[key];\n          }\n        });\n        if (isValid) {\n          indexes.push(i);\n        }\n      }\n    } else {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (this.__array__[i] === what) {\n          indexes.push(i);\n        }\n      }\n    }\n    return indexes;\n  }\n\n  lastIndexOf(what) {\n    return Math.max.apply(null, this.indexesOf(what));\n  }\n\n  insert(where, what) {\n    if (where > this.__array__.length) {\n      throw new Error(`ListOf#insert: index out of range, 'where' must be <= ${this.__array__.length}`);\n    }\n    if (what instanceof this.type) {\n      this.__array__.splice(0, where).concat([what]).concat(this.__array__.splice(where - 1));\n      return this;\n    } else if (Array.isArray(what)) {\n      this.__array__.splice(0, where).concat(what).concat(this.__array__.splice(where - 1));\n      return this;\n    }\n\n    throw new Error(`ListOf#insert: Item must be of type ${this.type.name}`);\n  }\n\n  remove(item) {\n    if (!this.__typeIsObject__) {\n      this.__array__ = this.__array__.filter(arrayItem => arrayItem !== item);\n    } else {\n      const removables = this.find(item).toArray();\n      this.__array__ = this.__array__.filter(arrayItem => !(removables.indexOf(arrayItem) > -1));\n    }\n    return this;\n  }\n\n  removeAt(position) {\n    return this.removeRange(position, 1);\n  }\n\n  removeRange(from, count) {\n    const newArray = [];\n    for (let x = from; x < this.__array__.length && x < from + count; x += 1) {\n      newArray.push(this.__array__[x]);\n    }\n    this.__array__ = newArray;\n    return this;\n  }\n\n  find(what) {\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      return _asListOf(this.type, this.__array__.filter((arrayItem) => {\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (arrayItem === null) {\n          return false;\n        }\n        Object.keys(what).forEach((key) => {\n          if (arrayItem[key] && Array.isArray(arrayItem[key])) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (arrayItem[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else if (arrayItem[key]) {\n            isValid &= arrayItem[key] === what[key];\n          }\n        });\n        return isValid;\n      }));\n    } else if (what instanceof Function) {\n      return _asListOf(this.type, this.__array__.filter(what));\n    }\n\n    return _asListOf(this.type, this.__array__.filter(arrayItem => arrayItem === what));\n  }\n\n  toString() {\n    return `ListOf<${this.type.name}>[${this.count()}]`;\n  }\n\n  valueOf() {\n    return this.count();\n  }\n\n  toArray() {\n    return this.__array__;\n  }\n\n  take(amount) {\n    return _asListOf(this.__array__.slice(0, amount));\n  }\n\n  skip(amount) {\n    return _asListOf(this.__array__.slice(amount));\n  }\n\n  distinct(what) {\n    const unique = [], auxiliary = [];\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (this.__array__[i] === null) continue;\n        if (auxiliary.indexOf(this.__array__[i][what]) > -1) {\n          continue;\n        } else {\n          auxiliary.push(this.__array__[i][what]);\n          unique.push(this.__array__[i]);\n        }\n      }\n    } else {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (unique.indexOf(this.__array__[i]) > -1) {\n          continue;\n        } else {\n          unique.push(this.__array__[i]);\n        }\n      }\n    }\n    return _asListOf(unique);\n  }\n\n  max(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return Math.max.apply(null, this.__array__.map(arrayItem => arrayItem[what]));\n    }\n    return Math.max.apply(null, this.__array__);\n  }\n\n  min(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return Math.min.apply(null, this.__array__.map(arrayItem => arrayItem[what]));\n    }\n    return Math.min.apply(null, this.__array__);\n  }\n\n  orderBy(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return _asListOf(this.__array__.sort((x, y) => (x !== null && y !== null) ? (x[what] > y[what]) : false));\n    }\n  }\n\n  orderByDescendent(what) {\n    return _asListOf(this.orderBy(what).toArray().reverse());\n  }\n\n  reverse() {\n    return _asListOf(this.__array__.reverse());\n  }\n}\n"],"names":["_asListOf","type","values","ListOf","add","__array__","__typeIsPrimitive__","Number","String","Boolean","indexOf","__typeIsObject__","toString","toLowerCase","items","_add","item","name","push","Error","Array","isArray","i","length","what","every","map","key","reduce","a","b","find","count","filter","some","Infinity","sum","any","index","isValid","atLeastOneValid","forEach","Function","result","findFirst","findLast","callback","call","j","indexes","Math","max","apply","indexesOf","where","splice","concat","arrayItem","removables","toArray","position","removeRange","from","newArray","x","amount","slice","unique","auxiliary","min","sort","y","orderBy","reverse"],"mappings":"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"}