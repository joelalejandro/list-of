{"version":3,"file":"index.umd.js","sources":["../src/list-of.js"],"sourcesContent":["/**\n * ListOf - A JavaScript implementation of the C# List<T> object\n *\n * Copyright Â© 2016 Joel A. Villarreal Bertoldi. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\nimport EventEmitter from 'eventemitter3';\n\nconst _asListOf = (type, values) => new ListOf(type).add(values);\n\nexport default class ListOf extends EventEmitter {\n  constructor(type) {\n    super();\n\n    this.type = type;\n\n    this.__array__ = [];\n    this.__typeIsPrimitive__ = [Number, String, Boolean].indexOf(type) > -1;\n    this.__typeIsObject__ = !this.__typeIsPrimitive__\n      && type.toString().toLowerCase().indexOf('function') === 0;\n  }\n\n  add(items) {\n    this.emit('before:add', items);\n\n    const _add = (item) => {\n      if ((this.__typeIsPrimitive__ && (typeof item).toLowerCase() === this.type.name.toLowerCase())\n        || (this.__typeIsObject__ && item instanceof this.type)) {\n        this.__array__.push(item);\n      } else {\n        throw new Error(`ListOf#add: Item must be of type ${this.type.name}`);\n      }\n    }\n\n    if (Array.isArray(items)) {\n      for (let i = 0; i < items.length; i += 1) {\n        _add(items[i]);\n      }\n      return this;\n    }\n\n    _add(items);\n\n    this.emit('add', items);\n    return this;\n  }\n\n  all(what) {\n    if (typeof what === 'object' && !Array.isArray(what)) {\n      return this.__array__.every\n        ? this.__array__.every(\n            item => Object.keys(what).map(key => item[key] === what[key]).reduce((a, b) => a && b)\n          )\n        : this.find(what).count() === this.__array__.length;\n    }\n\n    if (typeof what === 'function') {\n      return this.__array__.every\n        ? this.__array__.every(what)\n        : this.__array__.filter(what).length === this.__array__.length;\n    }\n\n    throw new Error(`ListOf#all: parameter 'what' must be an Object or a function predicate`)\n  }\n\n  any(what) {\n    if (typeof what === 'object' && !Array.isArray(what)) {\n      return this.__array__.some\n        ? this.__array__.some(\n            item => Object.keys(what).map(key => item[key] === what[key]).reduce((a, b) => a || b)\n          )\n        : (this.find(what).count() || Infinity) <= this.__array__.length;\n    }\n\n    if (typeof what === 'function') {\n      return this.__array__.some ? this.__array__.some(what) : (this.__array__.filter(what).length || Infinity) <= this.__array__.length;\n    }\n\n    throw new Error(`ListOf#all: parameter 'what' must be an Object or a function predicate`)\n  }\n\n  average(what) {\n    return this.sum(what) / this.__array__.length;\n  }\n\n  sum(what) {\n    let sum = 0;\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const value = this.__array__[i][what];\n        sum += value instanceof Function ? value.bind(this.__array__[i])() : value;\n      }\n    } else if (this.__typeIsPrimitive__ && this.type === Number) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        sum += this.__array__[i];\n      }\n    }\n    return sum;\n  }\n\n  clear() {\n    this.emit('before:clear');\n\n    this.__array__ = [];\n\n    this.emit('clear');\n\n    return this;\n  }\n\n  contains(item) {\n    return this.any(item);\n  }\n\n  count(what) {\n    return !what ? this.__array__.length : this.find(what).count();\n  }\n\n  elementAt(index) {\n    return this.__array__[index];\n  }\n\n  except(what) {\n    if (what instanceof Function) {\n      return _asListOf(this.type, this.__array__.filter(what));\n    }\n\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      return _asListOf(this.type, this.__array__.filter((item) => {\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        Object.keys(what).forEach((key) => {\n          if (item[key] && Array.isArray(what[key])) {\n            for (let i = 0; i < what[key].length; i += 1) {\n              if (item[key] !== what[key][i]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else if (item[key]) {\n            isValid &= item[key] === what[key];\n          }\n        });\n      }));\n    }\n\n    return _asListOf(this.type, this.__array__.filter(item => item !== what));\n  }\n\n  exists(what) {\n    return this.any(what);\n  }\n\n  findFirst(what) {\n    const result = this.find(what);\n    return result.elementAt(0) || null;\n  }\n\n  findLast(what) {\n    const result = this.find(what);\n    return result.elementAt(result.count() - 1) || null;\n  }\n\n  first(what) {\n    return !what ? this.__array__[0] : this.findFirst(what);\n  }\n\n  last(what) {\n    return !what ? this.__array__[this.__array__.length - 1] : this.findLast(what);\n  }\n\n  forEach(callback) {\n    for (let i = 0; i < this.__array__.length; i += 1) {\n      callback.call(this, this.__array__[i], i);\n    }\n  }\n\n  indexOf(what) {\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const item = this.__array__[i];\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (item === null && what === null) {\n          return i;\n        } else if (what !== null) {\n          continue;\n        }\n        Object.keys(what).forEach((key) => {\n          if (item[key]) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (item[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else {\n            isValid &= item[key] === what[key];\n          }\n        });\n        if (isValid) {\n          return i;\n        }\n      }\n    }\n    return this.__array__.indexOf(what);\n  }\n\n  indexesOf(what) {\n    const indexes = [];\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const item = this.__array__[i];\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (item === null && what === null) {\n          indexes.push(i);\n          continue;\n        } else if (what !== null) {\n          continue;\n        }\n        Object.keys(what).forEach((key) => {\n          if (item[key]) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (item[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else {\n            isValid &= item[key] === what[key];\n          }\n        });\n        if (isValid) {\n          indexes.push(i);\n        }\n      }\n    } else {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (this.__array__[i] === what) {\n          indexes.push(i);\n        }\n      }\n    }\n    return indexes;\n  }\n\n  lastIndexOf(what) {\n    return Math.max.apply(null, this.indexesOf(what));\n  }\n\n  insert(where, what) {\n    this.emit('before:insert', where, what);\n\n    if (where > this.__array__.length) {\n      throw new Error(`ListOf#insert: index out of range, 'where' must be <= ${this.__array__.length}`);\n    }\n\n    if (what instanceof this.type) {\n      this.__array__.splice(0, where).concat([what]).concat(this.__array__.splice(where - 1));\n      this.emit('insert', where, what);\n      return this;\n    }\n\n    if (Array.isArray(what)) {\n      this.__array__.splice(0, where).concat(what).concat(this.__array__.splice(where - 1));\n      this.emit('insert', where, what);\n      return this;\n    }\n\n    throw new Error(`ListOf#insert: Item must be of type ${this.type.name}`);\n  }\n\n  remove(item) {\n    this.emit('before:remove', item);\n\n    if (!this.__typeIsObject__) {\n      this.__array__ = this.__array__.filter(arrayItem => arrayItem !== item);\n    } else {\n      const index = this.__array__.indexOf(item);\n      this.__array__ = this.__array__.slice(0, index).concat(this.__array__.slice(index + 1));\n    }\n\n    this.emit('remove', item);\n\n    return this;\n  }\n\n  removeAt(position) {\n    return this.removeRange(position, 1);\n  }\n\n  removeRange(from, count) {\n    this.emit('before:removeRange', from, count);\n\n    const newArray = [];\n    for (let x = from; x < this.__array__.length && x < from + count; x += 1) {\n      newArray.push(this.__array__[x]);\n    }\n    this.__array__ = newArray;\n\n    this.emit('removeRange', from, count);\n\n    return this;\n  }\n\n  find(what) {\n    if (what instanceof Function) {\n      return _asListOf(this.type, this.__array__.filter(what));\n    }\n\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      return _asListOf(this.type, this.__array__.filter((arrayItem) => {\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (arrayItem === null) {\n          return false;\n        }\n        Object.keys(what).forEach((key) => {\n          if (arrayItem[key] && Array.isArray(arrayItem[key])) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (arrayItem[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else if (arrayItem[key]) {\n            isValid &= arrayItem[key] === what[key];\n          }\n        });\n        return isValid;\n      }));\n    }\n\n    return _asListOf(this.type, this.__array__.filter(arrayItem => arrayItem === what));\n  }\n\n  toString() {\n    return `ListOf<${this.type.name}>[${this.count()}]`;\n  }\n\n  valueOf() {\n    return this.count();\n  }\n\n  toArray() {\n    return this.__array__;\n  }\n\n  take(amount) {\n    return _asListOf(this.__array__.slice(0, amount));\n  }\n\n  skip(amount) {\n    return _asListOf(this.__array__.slice(amount));\n  }\n\n  distinct(what) {\n    const unique = [], auxiliary = [];\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (this.__array__[i] === null) continue;\n        if (auxiliary.indexOf(this.__array__[i][what]) > -1) {\n          continue;\n        } else {\n          auxiliary.push(this.__array__[i][what]);\n          unique.push(this.__array__[i]);\n        }\n      }\n    } else {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (unique.indexOf(this.__array__[i]) > -1) {\n          continue;\n        } else {\n          unique.push(this.__array__[i]);\n        }\n      }\n    }\n    return _asListOf(unique);\n  }\n\n  max(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return Math.max.apply(null, this.__array__.map(arrayItem => arrayItem[what]));\n    }\n    return Math.max.apply(null, this.__array__);\n  }\n\n  min(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return Math.min.apply(null, this.__array__.map(arrayItem => arrayItem[what]));\n    }\n    return Math.min.apply(null, this.__array__);\n  }\n\n  orderBy(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return _asListOf(this.__array__.sort((x, y) => (x !== null && y !== null) ? (x[what] > y[what]) : false));\n    }\n  }\n\n  orderByDescendent(what) {\n    return _asListOf(this.orderBy(what).toArray().reverse());\n  }\n\n  reverse() {\n    return _asListOf(this.__array__.reverse());\n  }\n}\n"],"names":["_asListOf","type","values","ListOf","add","__array__","__typeIsPrimitive__","Number","String","Boolean","indexOf","__typeIsObject__","toString","toLowerCase","items","emit","_add","item","name","push","Error","Array","isArray","i","length","what","every","map","key","reduce","a","b","find","count","filter","some","Infinity","sum","value","Function","bind","any","index","isValid","atLeastOneValid","forEach","result","elementAt","findFirst","findLast","callback","call","j","indexes","Math","max","apply","indexesOf","where","splice","concat","arrayItem","slice","position","removeRange","from","newArray","x","amount","unique","auxiliary","min","sort","y","orderBy","toArray","reverse","EventEmitter"],"mappings":"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"}