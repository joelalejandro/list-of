{"version":3,"file":"index.es6.js","sources":["../src/list-of.js"],"sourcesContent":["/**\n * ListOf - A JavaScript implementation of the C# List<T> object\n *\n * Copyright Â© 2016 Joel A. Villarreal Bertoldi. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\nimport EventEmitter from 'eventemitter3';\n\nconst _asListOf = (type, values) => new ListOf(type).add(values);\n\nexport default class ListOf extends EventEmitter {\n  constructor(type) {\n    super();\n\n    this.type = type;\n\n    this.__array__ = [];\n    this.__typeIsPrimitive__ = [Number, String, Boolean].indexOf(type) > -1;\n    this.__typeIsObject__ = !this.__typeIsPrimitive__\n      && type.toString().toLowerCase().indexOf('function') === 0;\n  }\n\n  add(items) {\n    this.emit('before:add', items);\n\n    const _add = (item) => {\n      if ((this.__typeIsPrimitive__ && (typeof item).toLowerCase() === this.type.name.toLowerCase())\n        || (this.__typeIsObject__ && item instanceof this.type)) {\n        this.__array__.push(item);\n      } else {\n        throw new Error(`ListOf#add: Item must be of type ${this.type.name}`);\n      }\n    }\n\n    if (Array.isArray(items)) {\n      for (let i = 0; i < items.length; i += 1) {\n        _add(items[i]);\n      }\n      return this;\n    }\n\n    _add(items);\n\n    this.emit('add', items);\n    return this;\n  }\n\n  all(what) {\n    if (typeof what === 'object' && !Array.isArray(what)) {\n      return this.__array__.every\n        ? this.__array__.every(\n            item => Object.keys(what).map(key => item[key] === what[key]).reduce((a, b) => a && b)\n          )\n        : this.find(what).count() === this.__array__.length;\n    }\n\n    if (typeof what === 'function') {\n      return this.__array__.every\n        ? this.__array__.every(what)\n        : this.__array__.filter(what).length === this.__array__.length;\n    }\n\n    throw new Error(`ListOf#all: parameter 'what' must be an Object or a function predicate`)\n  }\n\n  any(what) {\n    if (typeof what === 'object' && !Array.isArray(what)) {\n      return this.__array__.some\n        ? this.__array__.some(\n            item => Object.keys(what).map(key => item[key] === what[key]).reduce((a, b) => a || b)\n          )\n        : (this.find(what).count() || Infinity) <= this.__array__.length;\n    }\n\n    if (typeof what === 'function') {\n      return this.__array__.some ? this.__array__.some(what) : (this.__array__.filter(what).length || Infinity) <= this.__array__.length;\n    }\n\n    throw new Error(`ListOf#all: parameter 'what' must be an Object or a function predicate`)\n  }\n\n  average(what) {\n    return this.sum(what) / this.__array__.length;\n  }\n\n  sum(what) {\n    let sum = 0;\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const value = this.__array__[i][what];\n        sum += value instanceof Function ? value.bind(this.__array__[i])() : value;\n      }\n    } else if (this.__typeIsPrimitive__ && this.type === Number) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        sum += this.__array__[i];\n      }\n    }\n    return sum;\n  }\n\n  clear() {\n    this.emit('before:clear');\n\n    this.__array__ = [];\n\n    this.emit('clear');\n\n    return this;\n  }\n\n  contains(item) {\n    return this.any(item);\n  }\n\n  count(what) {\n    return !what ? this.__array__.length : this.find(what).count();\n  }\n\n  elementAt(index) {\n    return this.__array__[index];\n  }\n\n  except(what) {\n    if (what instanceof Function) {\n      return _asListOf(this.type, this.__array__.filter(what));\n    }\n\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      return _asListOf(this.type, this.__array__.filter((item) => {\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        Object.keys(what).forEach((key) => {\n          if (item[key] && Array.isArray(what[key])) {\n            for (let i = 0; i < what[key].length; i += 1) {\n              if (item[key] !== what[key][i]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else if (item[key]) {\n            isValid &= item[key] === what[key];\n          }\n        });\n      }));\n    }\n\n    return _asListOf(this.type, this.__array__.filter(item => item !== what));\n  }\n\n  exists(what) {\n    return this.any(what);\n  }\n\n  findFirst(what) {\n    const result = this.find(what);\n    return result.elementAt(0) || null;\n  }\n\n  findLast(what) {\n    const result = this.find(what);\n    return result.elementAt(result.count() - 1) || null;\n  }\n\n  first(what) {\n    return !what ? this.__array__[0] : this.findFirst(what);\n  }\n\n  last(what) {\n    return !what ? this.__array__[this.__array__.length - 1] : this.findLast(what);\n  }\n\n  forEach(callback) {\n    for (let i = 0; i < this.__array__.length; i += 1) {\n      callback.call(this, this.__array__[i], i);\n    }\n  }\n\n  indexOf(what) {\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const item = this.__array__[i];\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (item === null && what === null) {\n          return i;\n        } else if (what !== null) {\n          continue;\n        }\n        Object.keys(what).forEach((key) => {\n          if (item[key]) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (item[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else {\n            isValid &= item[key] === what[key];\n          }\n        });\n        if (isValid) {\n          return i;\n        }\n      }\n    }\n    return this.__array__.indexOf(what);\n  }\n\n  indexesOf(what) {\n    const indexes = [];\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        const item = this.__array__[i];\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (item === null && what === null) {\n          indexes.push(i);\n          continue;\n        } else if (what !== null) {\n          continue;\n        }\n        Object.keys(what).forEach((key) => {\n          if (item[key]) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (item[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else {\n            isValid &= item[key] === what[key];\n          }\n        });\n        if (isValid) {\n          indexes.push(i);\n        }\n      }\n    } else {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (this.__array__[i] === what) {\n          indexes.push(i);\n        }\n      }\n    }\n    return indexes;\n  }\n\n  lastIndexOf(what) {\n    return Math.max.apply(null, this.indexesOf(what));\n  }\n\n  insert(where, what) {\n    this.emit('before:insert', where, what);\n\n    if (where > this.__array__.length) {\n      throw new Error(`ListOf#insert: index out of range, 'where' must be <= ${this.__array__.length}`);\n    }\n\n    if (what instanceof this.type) {\n      this.__array__.splice(0, where).concat([what]).concat(this.__array__.splice(where - 1));\n      this.emit('insert', where, what);\n      return this;\n    }\n\n    if (Array.isArray(what)) {\n      this.__array__.splice(0, where).concat(what).concat(this.__array__.splice(where - 1));\n      this.emit('insert', where, what);\n      return this;\n    }\n\n    throw new Error(`ListOf#insert: Item must be of type ${this.type.name}`);\n  }\n\n  remove(item) {\n    this.emit('before:remove', item);\n\n    if (!this.__typeIsObject__) {\n      this.__array__ = this.__array__.filter(arrayItem => arrayItem !== item);\n    } else {\n      const index = this.__array__.indexOf(item);\n      this.__array__ = this.__array__.slice(0, index).concat(this.__array__.slice(index + 1));\n    }\n\n    this.emit('remove', item);\n\n    return this;\n  }\n\n  removeAt(position) {\n    return this.removeRange(position, 1);\n  }\n\n  removeRange(from, count) {\n    this.emit('before:removeRange', from, count);\n\n    const newArray = [];\n    for (let x = from; x < this.__array__.length && x < from + count; x += 1) {\n      newArray.push(this.__array__[x]);\n    }\n    this.__array__ = newArray;\n\n    this.emit('removeRange', from, count);\n\n    return this;\n  }\n\n  find(what) {\n    if (what instanceof Function) {\n      return _asListOf(this.type, this.__array__.filter(what));\n    }\n\n    if (this.__typeIsObject__ && !Array.isArray(what)) {\n      return _asListOf(this.type, this.__array__.filter((arrayItem) => {\n        let isValid = 1;\n        let atLeastOneValid = 0;\n        if (arrayItem === null) {\n          return false;\n        }\n        Object.keys(what).forEach((key) => {\n          if (arrayItem[key] && Array.isArray(arrayItem[key])) {\n            for (var j = 0; j < what[key].length; j += 1) {\n              if (arrayItem[key] === what[key][j]) {\n                atLeastOneValid = 1;\n                break;\n              }\n            }\n            isValid &= atLeastOneValid;\n          } else if (arrayItem[key]) {\n            isValid &= arrayItem[key] === what[key];\n          }\n        });\n        return isValid;\n      }));\n    }\n\n    return _asListOf(this.type, this.__array__.filter(arrayItem => arrayItem === what));\n  }\n\n  toString() {\n    return `ListOf<${this.type.name}>[${this.count()}]`;\n  }\n\n  valueOf() {\n    return this.count();\n  }\n\n  toArray() {\n    return this.__array__;\n  }\n\n  take(amount) {\n    return _asListOf(this.__array__.slice(0, amount));\n  }\n\n  skip(amount) {\n    return _asListOf(this.__array__.slice(amount));\n  }\n\n  distinct(what) {\n    const unique = [], auxiliary = [];\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (this.__array__[i] === null) continue;\n        if (auxiliary.indexOf(this.__array__[i][what]) > -1) {\n          continue;\n        } else {\n          auxiliary.push(this.__array__[i][what]);\n          unique.push(this.__array__[i]);\n        }\n      }\n    } else {\n      for (let i = 0; i < this.__array__.length; i += 1) {\n        if (unique.indexOf(this.__array__[i]) > -1) {\n          continue;\n        } else {\n          unique.push(this.__array__[i]);\n        }\n      }\n    }\n    return _asListOf(unique);\n  }\n\n  max(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return Math.max.apply(null, this.__array__.map(arrayItem => arrayItem[what]));\n    }\n    return Math.max.apply(null, this.__array__);\n  }\n\n  min(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return Math.min.apply(null, this.__array__.map(arrayItem => arrayItem[what]));\n    }\n    return Math.min.apply(null, this.__array__);\n  }\n\n  orderBy(what) {\n    if (this.__typeIsObject__ && typeof what === 'string') {\n      return _asListOf(this.__array__.sort((x, y) => (x !== null && y !== null) ? (x[what] > y[what]) : false));\n    }\n  }\n\n  orderByDescendent(what) {\n    return _asListOf(this.orderBy(what).toArray().reverse());\n  }\n\n  reverse() {\n    return _asListOf(this.__array__.reverse());\n  }\n}\n"],"names":["_asListOf","type","values","ListOf","add","__array__","__typeIsPrimitive__","Number","String","Boolean","indexOf","__typeIsObject__","toString","toLowerCase","items","emit","_add","item","name","push","Error","Array","isArray","i","length","what","every","map","key","reduce","a","b","find","count","filter","some","Infinity","sum","value","Function","bind","any","index","isValid","atLeastOneValid","forEach","result","elementAt","findFirst","findLast","callback","call","j","indexes","Math","max","apply","indexesOf","where","splice","concat","arrayItem","slice","position","removeRange","from","newArray","x","amount","unique","auxiliary","min","sort","y","orderBy","toArray","reverse","EventEmitter"],"mappings":"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"}